<?xml version="1.0"?>
<root>
  <OBJECT NAME="PLANEJAMENTOS_ESTOQUES">
    <METHOD NAME="ListarProdutos" DESCRIPTION="" VERSION="8" THREADSAFE="1">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="PLANEJAMENTO_ESTOQUE" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Planejamento Estoque" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="COD_PRODUTO" SIZE="20" FLAGS="1" PROJECTION="0" FIELDLABEL="Cod Produto" CTAB="0"/>
        <FIELD NAME="QTD" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" FIELDLABEL="Plan Estoque Produto" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT P.COD_PRODUTO,
       COUNT(*) QTD
FROM (SELECT PLANEJAMENTO_ESTOQUE,
             PRODUTO,
             COR
      FROM QIX_PLAN_ESTOQUE_PRODUTOS
      WHERE PLANEJAMENTO_ESTOQUE=:PLANEJAMENTO_ESTOQUE
      GROUP BY PLANEJAMENTO_ESTOQUE,
               PRODUTO,
               COR
      ORDER BY PRODUTO,
               COR) QP
INNER JOIN PRODUTOS P ON (QP.PRODUTO = P.PRODUTO)
WHERE QP.PLANEJAMENTO_ESTOQUE=:PLANEJAMENTO_ESTOQUE
GROUP BY P.COD_PRODUTO

</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>