<?xml version="1.0"?>
<root>
  <OBJECT NAME="PRODUTOSAC">
    <METHOD NAME="ProdutosPorEspecifica&#231;&#227;o" DESCRIPTION="Produtos Por Especifica&#231;&#227;o" VERSION="40" INTFTYPE="5" THREADSAFE="1">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="ESPECIFICACAO" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="1" LOOKUP="especificacao.Listar" LOOKUPKEY="F_225274430" LOOKUPDISPLAY="F_1802195444" LOOKUPCODE="F_225274430" FIELDLABEL="Especificacao" CTAB="0"/>
        <PARAM NAME="DEPARTAMENTO" SIZE="20" FLAGS="1" STYLE="6" PROJECTION="0" ORDER="3" LOOKUP="DEPARTAMENTOS.Lista" LOOKUPKEY="DEPARTAMENTO" LOOKUPDISPLAY="DESCRICAO" LOOKUPCODE="CODIGO" FIELDLABEL="Departamento" CTAB="0"/>
        <PARAM NAME="DESCRICAO" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="2" FIELDLABEL="Descri&#231;&#227;o" CTAB="0"/>
        <PARAM NAME="DESCRICAO_PRODUTO" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="4" FIELDLABEL="Descricao Produto" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="COD_PRODUTO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="7" FIELDLABEL="Cod Produto" CTAB="0"/>
        <FIELD NAME="DESCRICAO" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="8" FIELDLABEL="Descricao" CTAB="0"/>
        <FIELD NAME="TIPO_ESPEC" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="9" FIELDLABEL="Tipo Especifica&#231;&#227;o" CTAB="0"/>
        <FIELD NAME="ESPECIFICACAO" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="10" FIELDLABEL="Especifica&#231;&#227;o" CTAB="0"/>
        <FIELD NAME="MARCA" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="6" FIELDLABEL="Marca" CTAB="0"/>
        <FIELD NAME="PRODUTO" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Produto" CTAB="0"/>
        <FIELD NAME="PRODUTOAC" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Produtoac" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT P.cod_produto,P.descricao1 AS descricao,M.DESCRICAO AS MARCA , p.produto,p.produto AS PRODUTOAC,
  E.DESCRICAO AS TIPO_ESPEC,
  #if(EP.VALOR is NULL,EP.DESCRICAO,EP.VALOR) as ESPECIFICACAO
//   #if(EP.VALOR= not NULL, EP.VALOR)))AS ESPECIFICACAO
FROM  espec_produtos EP
            inner join produtos P on P.produto=EP.produto
            INNER JOIN ESPECIFICACOES E ON E.ESPECIFICACAO=EP.ESPECIFICACAO AND e.tipo_espec='02'
            LEFT JOIN MARCAS M ON M.MARCA=PRODUTOS.MARCA
 WHERE EP.ESPECIFICACAO=:ESPECIFICACAO
  [AND EP.VALOR LIKE '%'||(:DESCRICAO)||'%' OR EP.DESCRICAO LIKE '%'||(:DESCRICAO)||'%' ]
  [AND P.DESCRICAO1 LIKE '%'||(:DESCRICAO_PRODUTO)||'%']
  [AND P.DEPARTAMENTO IN #REPLACE(:DEPARTAMENTO)]

</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>