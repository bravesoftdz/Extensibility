<?xml version="1.0"?>
<root>
  <OBJECT NAME="DEPARTAMENTOS">
    <METHOD NAME="Lista" DESCRIPTION="Listar Departamentos com Filtro" VERSION="13" INTFTYPE="8" THREADSAFE="1">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="ORDEM" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="1" PROJECTION="0" ORDER="1" LOOKUP="list:'0','DESCRI&#199;&#195;O';'1','C&#211;DIGO';" FIELDLABEL="Ordem" CTAB="0"/>
        <PARAM NAME="CAMPO" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="1" PROJECTION="0" ORDER="2" LOOKUP="list:'0','DESCRI&#199;&#195;O';'1','C&#211;DIGO';" FIELDLABEL="Campo" CTAB="0"/>
        <PARAM NAME="FILTRO" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="2" PROJECTION="0" ORDER="3" LOOKUP="list:'0','>=';'1','&lt;=';'2','=';'3','&lt;>';'4','~=';" FIELDLABEL="Filtro" CTAB="0"/>
        <PARAM NAME="VALOR_FILTRO" SIZE="25" FLAGS="1" PROJECTION="0" ORDER="4" FIELDLABEL="Valor" CTAB="0"/>
        <PARAM NAME="VALOR_1" SIZE="25" FLAGS="1" PROJECTION="0" ORDER="5" FIELDLABEL="Entre" CTAB="0"/>
        <PARAM NAME="VALOR_2" SIZE="25" FLAGS="1" PROJECTION="0" ORDER="6" FIELDLABEL="e" CTAB="0"/>
        <PARAM NAME="GRUPO" FORMAT="N" SIZE="8" FLAGS="2" PROJECTION="0" FIELDLABEL="Grupo" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="DEPARTAMENTO" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Departamento" CTAB="0"/>
        <FIELD NAME="CODIGO" SIZE="3" FLAGS="17" PROJECTION="0" ORDER="8" FIELDLABEL="C&#243;digo" CTAB="0"/>
        <FIELD NAME="DESCRICAO" SIZE="35" FLAGS="17" PROJECTION="0" ORDER="9" FIELDLABEL="Descri&#231;&#227;o" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT  DEPARTAMENTO, COD_DEPARTAMENTO AS CODIGO, DESCRICAO
FROM DEPARTAMENTOS 
Where 
#SELECT( VALOR_FILTRO, NULL:{},
ELSE:{[AND #SELECT(CAMPO,0:DESCRICAO,1:COD_DEPARTAMENTO) #SELECT(FILTRO,4:{LIKE #REPLACETR(VALOR_FILTRO)},
                                                                       ELSE:{#SELECT(FILTRO,0:'>=',1:'&lt;=',2:'=',3:'&lt;>') :VALOR_FILTRO})]
})
[AND #SELECT(CAMPO,0:DESCRICAO,1:COD_DEPARTAMENTO) >= :VALOR_1] 
[AND #SELECT(CAMPO,0:DESCRICAO,1:COD_DEPARTAMENTO) &lt;= :VALOR_2]

[AND ((DEPARTAMENTO IN (SELECT CD.CLASSIFICACAO_FILHO
                       FROM CLASSIFICACOES_DEPENDENCIAS CD
                       WHERE CD.TIPO_PAI = '1' AND
                             CD.CLASSIFICACAO_PAI = :GRUPO AND
                             CD.TIPO_FILHO = '2')) OR
                       (SELECT COUNT(*)
                        FROM CLASSIFICACOES_DEPENDENCIAS CD
                        WHERE CD.TIPO_PAI = '1' AND
                              CD.CLASSIFICACAO_PAI = :GRUPO AND
                              CD.TIPO_FILHO = '2') =0)]

ORDER BY #SELECT(ORDEM,0:DESCRICAO,1:COD_DEPARTAMENTO)
</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>