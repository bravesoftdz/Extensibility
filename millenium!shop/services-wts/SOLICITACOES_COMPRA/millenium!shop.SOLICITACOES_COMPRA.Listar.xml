<?xml version="1.0"?>
<root>
  <OBJECT NAME="SOLICITACOES_COMPRA">
    <METHOD NAME="Listar" DESCRIPTION="Solicita&#231;&#245;es de Compra" VERSION="64" INTFTYPE="14" THREADSAFE="0">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="COD_SOLICITACAO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="1" FIELDLABEL="N&#250;mero" CTAB="0"/>
        <PARAM NAME="DATA" FORMAT="D" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="2" FIELDLABEL="Data" CTAB="0"/>
        <PARAM NAME="FUNCIONARIO" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="3" LOOKUP="MILLENIUM.FUNCIONARIOS.LISTA_TODOS" LOOKUPKEY="FUNCIONARIO" LOOKUPDISPLAY="NOME" LOOKUPCODE="COD_FUNCIONARIO" FIELDLABEL="Funcionario" CTAB="0"/>
        <PARAM NAME="STATUS_WORKFLOW" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="4" LOOKUP="MILLENIUM.STATUS_WORKFLOW.LISTA" LOOKUPKEY="STATUS_WORKFLOW" LOOKUPDISPLAY="DESCRICAO" FIELDLABEL="Status Workflow" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="SOLICITACAO_COMPRA" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Solicitacao Compra" CTAB="0"/>
        <FIELD NAME="COD_SOLICITACAO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="6" FIELDLABEL="N&#250;mero" CTAB="0"/>
        <FIELD NAME="DATA" FORMAT="D" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="7" FIELDLABEL="Data" CTAB="0"/>
        <FIELD NAME="NOME_FUNCIONARIO" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="9" FIELDLABEL="Funcion&#225;rio" CTAB="0"/>
        <FIELD NAME="VALOR_PRE_APROVADO" FORMAT="M" SIZE="17" FLAGS="1" DECIMALS="4" PROJECTION="0" ORDER="10" FIELDLABEL="Valor Estimado" CTAB="0"/>
        <FIELD NAME="STATUS_WF" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="14" FIELDLABEL="Status" CTAB="0"/>
        <FIELD NAME="CANCELADO" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="18" FIELDLABEL="Cancelado" CTAB="0"/>
        <FIELD NAME="COD_PEDIDOC" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="12" FIELDLABEL="Pedido de Compra" CTAB="0"/>
        <FIELD NAME="ENTREGUE" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="17" FIELDLABEL="Entregue" CTAB="0"/>
        <FIELD NAME="DATA_ENTREGA_SOLICITANTE" FORMAT="D" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="11" FIELDLABEL="Data Entrega(Prevista)" CTAB="0"/>
        <FIELD NAME="DATA_ENTREGA_PC" FORMAT="D" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="13" FIELDLABEL="Data Entrega(Pedido de Compra)" CTAB="0"/>
        <FIELD NAME="APROVADO" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="15" FIELDLABEL="Aprovado" CTAB="0"/>
        <FIELD NAME="COMPRADO" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="16" FIELDLABEL="Comprado" CTAB="0"/>
        <FIELD NAME="TIPO_PRODUTO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="8" FIELDLABEL="Tipo Produto" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT S.SOLICITACAO_COMPRA,
       S.COD_SOLICITACAO,
       S.DATA,
       F.NOME AS NOME_FUNCIONARIO,
       S.VALOR_PRE_APROVADO,
       SW.DESCRICAO AS STATUS_WF,
       PC.COD_PEDIDOC,
       S.CANCELADO,
       S.APROVADO,
       S.ENTREGUE,
       S.DATA_ENTREGA_SOLICITANTE,
       S.COMPRADO,
       PC.DATA_ENTREGA AS DATA_ENTREGA_PC,
       #TRANSLATE(S.TIPO_PRODUTO,
                  0: "Servi&#231;o",
                  1: "Material de Consumo",
                  2: "Contrato") AS TIPO_PRODUTO
FROM SF_SOLICITACOES_COMPRA S
INNER JOIN FUNCIONARIOS F ON (F.FUNCIONARIO = S.FUNCIONARIO)
LEFT JOIN SF_SOLICITACAO_PEDIDO_COMPRA SPC ON (SPC.SOLICITACAO_COMPRA=S.SOLICITACAO_COMPRA)
LEFT JOIN PEDIDO_COMPRA PC ON (PC.PEDIDOC = SPC.PEDIDOC)
LEFT JOIN STATUS_WORKFLOW SW ON (SW.STATUS_WORKFLOW = S.STATUS_WORKFLOW)
WHERE
     [S.COD_SOLICITACAO=:COD_SOLICITACAO]
     [AND S.DATA=:DATA]
     [AND S.FUNCIONARIO =:FUNCIONARIO]
     [AND S.STATUS_WORKFLOW=:STATUS_WORKFLOW]
ORDER BY S.COD_SOLICITACAO;
</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>