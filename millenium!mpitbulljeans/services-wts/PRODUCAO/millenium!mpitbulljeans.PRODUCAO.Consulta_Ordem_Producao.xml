<?xml version="1.0"?>
<root>
  <OBJECT NAME="PRODUCAO">
    <METHOD NAME="Consulta_Ordem_Producao" DESCRIPTION="Consulta Ordens de Produ&#231;&#227;o em Andamento" VERSION="132" INTFTYPE="5" THREADSAFE="1">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="PRODUCAO" FORMAT="N" SIZE="8" FLAGS="9" PROJECTION="0" ORDER="10" FIELDLABEL="Producao" CTAB="0"/>
        <PARAM NAME="N_ORDEM" SIZE="12" FLAGS="1" PROJECTION="0" ORDER="6" LOOKUP="PRODUCAO.Lista_Ordems" LOOKUPKEY="N_ORDEM" LOOKUPDISPLAY="N_ORDEM" FIELDLABEL="N Ordem" CTAB="0"/>
        <PARAM NAME="TIPO_PRODUCAO" SIZE="2" FLAGS="1" DEFAULT="AC" PROJECTION="0" ORDER="11" LOOKUP="list:'AC','PRODUTO ACABADO';'MP','MAT&#201;RIA-PRIMA';" FIELDLABEL="Tipo Producao" CTAB="0"/>
        <PARAM NAME="ORDEM1" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="0" PROJECTION="0" ORDER="9" LOOKUP="list:'0','Produto';'1','Estampa';'2','Cor';'3','Tamanho';" FIELDLABEL="Ordem" CTAB="0"/>
        <PARAM NAME="ORDEM2" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="1" PROJECTION="0" ORDER="12" LOOKUP="list:'0','Produto';'1','Estampa';'2','Cor';'3','Tamanho';" FIELDLABEL="Data Emissao" CTAB="0"/>
        <PARAM NAME="ORDEM3" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="2" PROJECTION="0" ORDER="13" LOOKUP="list:'0','Produto';'1','Estampa';'2','Cor';'3','Tamanho';" FIELDLABEL="Data Vencimento" CTAB="0"/>
        <PARAM NAME="ORDEM4" FORMAT="N" SIZE="1" FLAGS="17" DEFAULT="3" PROJECTION="0" ORDER="14" LOOKUP="list:'0','Produto';'1','Estampa';'2','Cor';'3','Tamanho';" FIELDLABEL="Data Pagamento" CTAB="0"/>
        <PARAM NAME="FASE" FORMAT="N" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="8" FIELDLABEL="Fase" CTAB="0"/>
        <PARAM NAME="CELULA" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="7" FIELDLABEL="Celula" CTAB="0"/>
        <PARAM NAME="GRUPO_ORDEM" SIZE="6" FLAGS="1" PROJECTION="0" ORDER="5" LOOKUP="PRODUCAO.Lista_Grupos" LOOKUPKEY="GRUPO_ORDEM" LOOKUPDISPLAY="GRUPO_ORDEM" FIELDLABEL="Grupo Ordem" CTAB="0"/>
        <PARAM NAME="COR" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="2" FIELDLABEL="Cor" CTAB="0"/>
        <PARAM NAME="TAMANHO" SIZE="5" FLAGS="1" PROJECTION="0" ORDER="4" FIELDLABEL="Tamanho" CTAB="0"/>
        <PARAM NAME="NUMENVIO" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="3" FIELDLABEL="Numenvio" CTAB="0"/>
        <PARAM NAME="PARTE" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Parte" CTAB="0"/>
        <PARAM NAME="CLIENTE" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Cliente" CTAB="0"/>
        <PARAM NAME="PEDIDOV" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Pedidov" CTAB="0"/>
        <PARAM NAME="TIPO_PROD" SIZE="2" FLAGS="1" PROJECTION="0" ORDER="15" LOOKUP="list:'AC','Produto Acabado';'MP','Mat&#233;ria-Prima';" FIELDLABEL="Tipo de Produto" CTAB="0"/>
        <PARAM NAME="CANAL_VENDA" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="1" LOOKUP="CANAIS_VENDA.Listar" LOOKUPKEY="CANAL_VENDA" LOOKUPDISPLAY="DESCRICAO" LOOKUPCODE="COD_CANAL_VENDA" FIELDLABEL="Canal Venda" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="PRODUTO" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Produto" CTAB="0"/>
        <FIELD NAME="COD_PRODUTO" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="39" FIELDLABEL="Cod Produto" CTAB="0"/>
        <FIELD NAME="DESCRICAO1" SIZE="100" FLAGS="1" PROJECTION="0" ORDER="47" FIELDLABEL="Descricao1" CTAB="0"/>
        <FIELD NAME="N_ORDEM" SIZE="12" FLAGS="1" PROJECTION="0" ORDER="48" FIELDLABEL="N Ordem" CTAB="0"/>
        <FIELD NAME="TIPO_PRODUCAO" SIZE="2" FLAGS="1" PROJECTION="0" ORDER="55" FIELDLABEL="Tipo Producao" CTAB="0"/>
        <FIELD NAME="DATA_PRE_FASE" FORMAT="H" SIZE="18" FLAGS="1" PROJECTION="0" ORDER="41" FIELDLABEL="Data Pre Fase" CTAB="0"/>
        <FIELD NAME="COD_PEDIDOV" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="38" FIELDLABEL="Cod Pedidov" CTAB="0"/>
        <FIELD NAME="DATA_INICIO" FORMAT="H" SIZE="18" FLAGS="1" PROJECTION="0" ORDER="40" FIELDLABEL="Data Inicio" CTAB="0"/>
        <FIELD NAME="SITUACAO" FORMAT="N" SIZE="8" FLAGS="9" PROJECTION="0" ORDER="32" FIELDLABEL="Situacao" CTAB="0"/>
        <FIELD NAME="FASE" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Fase" CTAB="0"/>
        <FIELD NAME="COD_FASE" SIZE="4" FLAGS="1" PROJECTION="0" ORDER="35" FIELDLABEL="Cod Fase" CTAB="0"/>
        <FIELD NAME="DESC_FASE" SIZE="32" FLAGS="1" PROJECTION="0" ORDER="45" FIELDLABEL="Desc Fase" CTAB="0"/>
        <FIELD NAME="COR" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Cor" CTAB="0"/>
        <FIELD NAME="COD_COR" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="33" FIELDLABEL="Cod Cor" CTAB="0"/>
        <FIELD NAME="DESC_COR" SIZE="25" FLAGS="1" PROJECTION="0" ORDER="43" FIELDLABEL="Desc Cor" CTAB="0"/>
        <FIELD NAME="ESTAMPA" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Estampa" CTAB="0"/>
        <FIELD NAME="COD_EST" SIZE="4" FLAGS="1" PROJECTION="0" ORDER="34" FIELDLABEL="Cod Est" CTAB="0"/>
        <FIELD NAME="DESC_ESTAMPA" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="44" FIELDLABEL="Desc Estampa" CTAB="0"/>
        <FIELD NAME="TAMANHO" SIZE="5" FLAGS="1" PROJECTION="0" ORDER="54" FIELDLABEL="Tamanho" CTAB="0"/>
        <FIELD NAME="QUANTIDADE" FORMAT="N" SIZE="15" FLAGS="9" DECIMALS="7" PROJECTION="0" ORDER="53" FIELDLABEL="Quantidade" CTAB="0"/>
        <FIELD NAME="PARTE" FORMAT="N" SIZE="8" FLAGS="9" PROJECTION="0" ORDER="51" FIELDLABEL="Parte" CTAB="0"/>
        <FIELD NAME="FORNECEDOR" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Fornecedor" CTAB="0"/>
        <FIELD NAME="COD_FORNECEDOR" SIZE="10" FLAGS="1" PROJECTION="0" ORDER="37" FIELDLABEL="Cod Fornecedor" CTAB="0"/>
        <FIELD NAME="OFICINA" SIZE="60" FLAGS="1" PROJECTION="0" ORDER="50" FIELDLABEL="Oficina" CTAB="0"/>
        <FIELD NAME="FILIAL" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Filial" CTAB="0"/>
        <FIELD NAME="COD_FILIAL" SIZE="5" FLAGS="1" PROJECTION="0" ORDER="36" FIELDLABEL="Cod Filial" CTAB="0"/>
        <FIELD NAME="NOME_FILIAL" SIZE="60" FLAGS="1" PROJECTION="0" ORDER="49" FIELDLABEL="Nome Filial" CTAB="0"/>
        <FIELD NAME="GRADE" FORMAT="N" SIZE="8" FLAGS="8" PROJECTION="0" FIELDLABEL="Grade" CTAB="0"/>
        <FIELD NAME="PERDAS" FORMAT="N" SIZE="15" FLAGS="9" DECIMALS="7" PROJECTION="0" ORDER="52" FIELDLABEL="Perdas" CTAB="0"/>
        <FIELD NAME="DEFEITOS" FORMAT="N" SIZE="15" FLAGS="9" DECIMALS="7" PROJECTION="0" ORDER="42" FIELDLABEL="Defeitos" CTAB="0"/>
        <FIELD NAME="PRODUCAO" FORMAT="N" SIZE="8" FLAGS="9" PROJECTION="0" ORDER="31" FIELDLABEL="Producao" CTAB="0"/>
        <FIELD NAME="ACESSA_OFICINA" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Acessa Oficina" CTAB="0"/>
        <FIELD NAME="PERDAS_DEFEITOS" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Perdas Defeitos" CTAB="0"/>
        <FIELD NAME="DESC_PARTE" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="46" FIELDLABEL="Desc Parte" CTAB="0"/>
        <FIELD NAME="FICHA_TECNICA" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Ficha Tecnica" CTAB="0"/>
        <FIELD NAME="CICLO" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Ciclo" CTAB="0"/>
        <FIELD NAME="CELULA" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Celula" CTAB="0"/>
        <FIELD NAME="COD_CELULA" SIZE="3" FLAGS="1" PROJECTION="0" ORDER="26" FIELDLABEL="Cod Celula" CTAB="0"/>
        <FIELD NAME="DESC_CELULA" SIZE="20" FLAGS="1" PROJECTION="0" ORDER="27" FIELDLABEL="Desc Celula" CTAB="0"/>
        <FIELD NAME="LOTE" SIZE="30" FLAGS="1" PROJECTION="0" ORDER="30" FIELDLABEL="Lote" CTAB="0"/>
        <FIELD NAME="CAIXA" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="25" FIELDLABEL="Caixa" CTAB="0"/>
        <FIELD NAME="ACESSA_CAIXAS" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Acessa Caixa" CTAB="0"/>
        <FIELD NAME="TIPO_DEFEITO" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Tipo Defeito" CTAB="0"/>
        <FIELD NAME="DIVIDE_LOTES" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="28" FIELDLABEL="Divide Lotes" CTAB="0"/>
        <FIELD NAME="FOLHAS" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="29" FIELDLABEL="Folhas" CTAB="0"/>
        <FIELD NAME="LANCA_ENFESTO" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Lanca Enfesto" CTAB="0"/>
        <FIELD NAME="LANCA_COMPLEMENTO" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Lanca Complemento" CTAB="0"/>
        <FIELD NAME="COMPLEMENTO" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Complemento" CTAB="0"/>
        <FIELD NAME="COD_PROD" SIZE="20" PROJECTION="0" FIELDLABEL="Cod Prod" CTAB="0"/>
        <FIELD NAME="BAIXA_ESTOQUE" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="24" FIELDLABEL="Baixa Estoque" CTAB="0"/>
        <FIELD NAME="BENEFICIAMENTO" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Beneficiamento" CTAB="0"/>
        <FIELD NAME="LOTE_MP" SIZE="30" FLAGS="1" PROJECTION="0" ORDER="21" FIELDLABEL="Lote Mp" CTAB="0"/>
        <FIELD NAME="CONES" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="19" FIELDLABEL="Cones" CTAB="0"/>
        <FIELD NAME="NIVEL" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="23" FIELDLABEL="Nivel" CTAB="0"/>
        <FIELD NAME="IMPRIME_ETIQUETA" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="20" FIELDLABEL="Imprime Etiqueta" CTAB="0"/>
        <FIELD NAME="MANTEMLOTE" FORMAT="B" SIZE="1" FLAGS="1" PROJECTION="0" ORDER="22" FIELDLABEL="Mantemlote" CTAB="0"/>
        <FIELD NAME="CTAMANHO" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Ctamanho" CTAB="0"/>
        <FIELD NAME="NUMENVIO" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" ORDER="18" FIELDLABEL="Numenvio" CTAB="0"/>
        <FIELD NAME="DATA_PREVISTO" FORMAT="D" SIZE="10" PROJECTION="0" FIELDLABEL="Data Previsto" CTAB="0"/>
        <FIELD NAME="DESC_TAMANHO" SIZE="20" PROJECTION="0" FIELDLABEL="Desc Tamanho" CTAB="0"/>
        <FIELD NAME="LISTA_FUNCIONARIO" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Lista Funcionario" CTAB="0"/>
        <FIELD NAME="CONTROLA_CHASSI" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Controla Chassi" CTAB="0"/>
        <FIELD NAME="GERA_ARQ_ETIQUETA" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Gera Arq Etiqueta" CTAB="0"/>
        <FIELD NAME="TIPO_QUALIDADE" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Tipo Qualidade" CTAB="0"/>
        <FIELD NAME="QUALIDADE" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Qualidade" CTAB="0"/>
        <FIELD NAME="GRUPO_ORDEM" SIZE="6" PROJECTION="0" FIELDLABEL="Grupo Ordem" CTAB="0"/>
        <FIELD NAME="CONFERIDO_RFID" FORMAT="B" SIZE="1" PROJECTION="0" FIELDLABEL="Conferido Rfid" CTAB="0"/>
        <FIELD NAME="FILIAL_PRODUCAO" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Filial Producao" CTAB="0"/>
        <FIELD NAME="DESC_CANAL_VENDA" SIZE="50" FLAGS="1" PROJECTION="0" ORDER="17" FIELDLABEL="Desc Canal Venda" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT:PD
PRODUCAO.PRODUCAO, PRODUCAO.FICHA_TECNICA, 
P1.PRODUTO, P1.COD_PRODUTO, P1.DESCRICAO1, SITUACAO_PRODUCAO.CONES,
N_ORDEM, TIPO_PRODUCAO, DATA_PRE_FASE, PEDIDOV AS COD_PEDIDOV,
SITUACAO_PRODUCAO.DATA_INICIO, SITUACAO_PRODUCAO.SITUACAO, FASES.FASE, COD_FASE,
FASES.DESCRICAO AS DESC_FASE, CORES.COR, COD_COR, SITUACAO_PRODUCAO.LOTE, 
CAIXAS_PRODUCAO.CAIXA, CELULAS.CELULA, CELULAS.COD_CELULA, 
CELULAS.DESCRICAO AS DESC_CELULA, SITUACAO_PRODUCAO.COMPLEMENTO, 
FASES.LANCA_ENFESTO, FASES.LANCA_COMPLEMENTO, FASES.BENEFICIAMENTO, 
CORES.DESCRICAO AS DESC_COR, ESTAMPAS.ESTAMPA, COD_EST, 
ESTAMPAS.DESCRICAO AS DESC_ESTAMPA, SITUACAO_PRODUCAO.TAMANHO, 
SITUACAO_PRODUCAO.QUANTIDADE, PARTES.PARTE, SITUACAO_PRODUCAO.LOTE_MP,
PARTES.DESCRICAO AS DESC_PARTE, P2.COD_PRODUTO AS COD_PROD,
FORNECEDORES.FORNECEDOR, COD_FORNECEDOR, FASES.MANTEMLOTE, TAMANHOS.CTAMANHO,
FORNECEDORES.NOME AS OFICINA, FILIAIS.FILIAL, FASES.IMPRIME_ETIQUETA,
COD_FILIAL, FILIAIS.NOME AS NOME_FILIAL, PERDAS, DEFEITOS, FASES.TIPO_DEFEITO, FASES.DIVIDE_LOTES, F.FOLHAS, FASES.BAIXA_ESTOQUE, 
FASES.ACESSA_OFICINA, FASES.PERDAS_DEFEITOS, FASES.ACESSA_CAIXAS, #NULL_TO_N(PRODUCAO.CICLO,FT.CICLO) AS CICLO, CF.NIVEL,
SITUACAO_PRODUCAO.NUMENVIO, TAMANHOS.DESC_TAMANHO, FASES.LISTA_FUNCIONARIO, #IF(P1.CONTROLA_LOTE = "C", TRUE, FALSE) AS CONTROLA_CHASSI,
FASES.GERA_ARQ_ETIQUETA
,FASES.TIPO_QUALIDADE
,SITUACAO_PRODUCAO.QUALIDADE
,PRODUCAO.GRUPO_ORDEM
,SITUACAO_PRODUCAO.CONFERIDO_RFID
,PRODUCAO.FILIAL AS FILIAL_PRODUCAO
,CV.DESCRICAO AS DESC_CANAL_VENDA

FROM PRODUCAO
    LEFT JOIN SITUACAO_PRODUCAO
       ON PRODUCAO.PRODUCAO = SITUACAO_PRODUCAO.PRODUCAO
    LEFT JOIN PRODUTOS P1
       ON SITUACAO_PRODUCAO.PRODUTO = P1.PRODUTO
    LEFT JOIN PRODUTOS P2
       ON PRODUCAO.PRODUTO = P2.PRODUTO
    LEFT JOIN CAIXAS_PRODUCAO 
       ON CAIXAS_PRODUCAO.PRODUCAO = PRODUCAO.PRODUCAO
       AND CAIXAS_PRODUCAO.LOTE = SITUACAO_PRODUCAO.LOTE
       AND CAIXAS_PRODUCAO.PRODUTO+0 = SITUACAO_PRODUCAO.PRODUTO
    LEFT JOIN CORES
       ON SITUACAO_PRODUCAO.COR = CORES.COR 
    LEFT JOIN ESTAMPAS
       ON SITUACAO_PRODUCAO.ESTAMPA = ESTAMPAS.ESTAMPA
    LEFT JOIN FASES
       ON SITUACAO_PRODUCAO.FASE = FASES.FASE
    LEFT JOIN CICLO_FASES CF
       ON CF.CICLO =PRODUCAO.CICLO AND CF.FASE = SITUACAO_PRODUCAO.FASE
    LEFT JOIN PARTES
       ON SITUACAO_PRODUCAO.PARTE = PARTES.PARTE
          AND PRODUCAO.FICHA_TECNICA = PARTES.FICHA_TECNICA
    LEFT JOIN FILIAIS
       ON SITUACAO_PRODUCAO.FILIAL = FILIAIS.FILIAL 
    LEFT JOIN FORNECEDORES
       ON SITUACAO_PRODUCAO.OFICINA = FORNECEDORES.FORNECEDOR     
    LEFT JOIN TAMANHOS
       ON (TAMANHOS.GRADE = P1.GRADE
           AND TAMANHOS.TAMANHO = SITUACAO_PRODUCAO.TAMANHO)
    LEFT JOIN CELULAS
       ON SITUACAO_PRODUCAO.CELULA = CELULAS.CELULA
    LEFT JOIN FOLHAS_PRODUCAO F 
       ON F.PRODUCAO=:PRODUCAO AND F.COR=SITUACAO_PRODUCAO.COR 
          AND F.ESTAMPA=SITUACAO_PRODUCAO.ESTAMPA
          AND F.COMPLEMENTO=SITUACAO_PRODUCAO.COMPLEMENTO
    LEFT JOIN FICHAS_TECNICAS FT ON FT.FICHA_TECNICA = PRODUCAO.FICHA_TECNICA
    LEFT JOIN PIT_CANAIS_VENDA_PRODUCAO CVP ON (CVP.SITUACAO = SITUACAO_PRODUCAO.SITUACAO) AND
                                               (CVP.LOTE = SITUACAO_PRODUCAO.LOTE )
    LEFT JOIN PIT_CANAIS_VENDA CV ON CV.CANAL_VENDA = CVP.CANAL_VENDA

WHERE 
     PRODUCAO.STATUS = 'A'
[AND PRODUCAO.PRODUCAO=:PRODUCAO]
[AND PRODUCAO.N_ORDEM=:N_ORDEM]
[AND PRODUCAO.GRUPO_ORDEM=:GRUPO_ORDEM]
[AND SITUACAO_PRODUCAO.FASE=:FASE]
[AND SITUACAO_PRODUCAO.CELULA=:CELULA]
[AND PRODUCAO.TIPO_PRODUCAO=:TIPO_PRODUCAO]
[AND SITUACAO_PRODUCAO.TAMANHO=:TAMANHO]
[AND SITUACAO_PRODUCAO.COR=:COR]
[AND SITUACAO_PRODUCAO.NUMENVIO=:NUMENVIO]
[AND SITUACAO_PRODUCAO.PARTE=:PARTE]
[AND (PRODUCAO.CLIENTE=:CLIENTE OR EXISTS ( SELECT * FROM PEDIDOS_PRODUCAO PPC INNER JOIN PEDIDO_VENDA PV ON PV.PEDIDOV=PPC.PEDIDO WHERE PV.CLIENTE=:CLIENTE AND PPC.PRODUCAO=PRODUCAO.PRODUCAO ) ) ]
[AND P1.TIPO_PROD=:TIPO_PROD]
[AND CVP.CANAL_VENDA =:CANAL_VENDA]

#SELECT(PEDIDOV,NULL:{},ELSE:{
  AND EXISTS ( SELECT * FROM PEDIDOS_PRODUCAO PPC WHERE PPC.PEDIDO=:PEDIDOV AND PPC.PRODUCAO=PRODUCAO.PRODUCAO ) })

ORDER BY #SELECT(ORDEM1,4:SITUACAO_PRODUCAO.LOTE,
ELSE:FASES.FASE), CELULAS.CELULA,
#SELECT(ORDEM1,0:SITUACAO_PRODUCAO.PRODUTO,1:SITUACAO_PRODUCAO.ESTAMPA,2:SITUACAO_PRODUCAO.COR,ELSE:CTAMANHO), #SELECT(ORDEM2,0:SITUACAO_PRODUCAO.PRODUTO,1:SITUACAO_PRODUCAO.ESTAMPA,2:SITUACAO_PRODUCAO.COR,ELSE:CTAMANHO), #SELECT(ORDEM3,0:SITUACAO_PRODUCAO.PRODUTO,1:SITUACAO_PRODUCAO.ESTAMPA,2:SITUACAO_PRODUCAO.COR,ELSE:CTAMANHO), #SELECT(ORDEM4,0:SITUACAO_PRODUCAO.PRODUTO,1:SITUACAO_PRODUCAO.ESTAMPA,2:SITUACAO_PRODUCAO.COR,ELSE:CTAMANHO), PARTES.PARTE, SITUACAO_PRODUCAO.LOTE
</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>